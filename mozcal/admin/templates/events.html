{% extends 'admin.html' %}

{% set active_tab = 'events' %}

{% block actions %}
  <a class="button" href="?format=csv">Export CSV</a>
  <a class="button" href="{{ url('events_new_event') }}">New event</a>
{% endblock %}

{% block tablecontent %}
  <thead>
    <tr>
      <th>Event name</th>
      <th>Space</th>
      <th>Date</th>
      <th>Area</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    {% for event in events %}
    <tr>
      <td><a href="#linkToEventPage?">{{ event.title }}</a></td>
      <td>{{ event.space }}</td>
      <td>{{ event.start_date }} - {{ event.end_date }}</td>
      <td>{{ event.area_names|join(', ') }}</td>
      <td class="actions">

        <a class="button insensitive" href="{{ url('event_edit', slug=event.slug) }}">e</a>
        <a class="button insensitive" href="{{ url('event_dedupe', slug=event.slug) }}">d</a>

        <form action="{{ url('event_delete') }}" method="post">
          {{ csrf() }}
          <input type="hidden" name="id" value="{{ event.id }}">
          <input type="submit" value="x" class="button negative">
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
{% endblock %}